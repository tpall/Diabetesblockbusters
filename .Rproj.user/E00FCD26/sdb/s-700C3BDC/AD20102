{
    "contents" : "library(magrittr)\nlibrary(ggplot2)\n\nlabel_wrap_gen <- function(width = 25) {\n  function(variable, value) {\n    lapply(strwrap(as.character(value), width=width, simplify=FALSE), \n           paste, collapse=\"\\n\")\n  }\n}\n\nlibrary(RColorBrewer)\nlibrary(directlabels)\n\ntextConnection(\"Generic name,Brand,Company, Sales, Year\n               insulin glargine, Lantus, Sanofi, 8433, 2014\n               sitagliptin, Januvia, Merck & Co, 3931, 2014\n               insulin lispro, Humalog, Eli Lilly, 2785, 2014\n               insulin aspart, Novo rapid, Novo Nordisk, 2780, 2014\n               insulin detemir, Levemir, Novo Nordisk, 2265, 2014\n               liraglutide, Victoza, Novo Nordisk, 2139, 2014\n               sitagliptin+metformin, Janumet, Merck & Co, 2071, 2014\n               insulin aspart, NovoLog, Novo Nordisk, 1572, 2014\n               insulin lispro, Humalin, Eli Lilly, 1400, 2014\n               vildagliptin, Galvus, Novartis, 1224, 2014\n               insulin glargine, Lantus, Sanofi, 4990, 2020\n               sitagliptin, Januvia, Merck & Co, 3991, 2020\n               insulin aspart, Novo rapid, Novo Nordisk, 3568, 2020\n               insulin lispro, Humalog, Eli Lilly, 3047, 2020\n               canagliflozin, Invokana, Johnson & Johnson, 3030, 2020\n               liraglutide, Victoza, Novo Nordisk, 2794, 2020\n               sitagliptin+metformin, Janumet, Merck & Co, 2827, 2020\n               insulin detemir, Levemir, Novo Nordisk, 2608, 2020\n               insulin degludec, Tresiba, Novo Nordisk, 1997, 2020\n               insulin aspart, NovoLog, Novo Nordisk, 1800, 2020\n               insulin glargine (U300), Toujeo, Sanofi, 1494, 2020\n               insulin lispro, Humalin, Eli Lilly, 1452, 2020\n               vildagliptin, Galvus, Novartis, 1421, 2020\n               dapagliflozin, Farxiga, AstraZeneca, 1337, 2020\n               saxagliptin, Onglyza, AstraZeneca, 1325, 2020\n               dulaglutide, Trulicity, Eli Lilly Boehringer Ingelheim, 1266, 2020\n               insulin degludec+liraglutide, Xultrophy, Novo Nordisk, 1168, 2020\") %>%\n  read.csv %>% {\n    ann_brands <- .[.$Year==2020,]\n    colourCount <- (.)%>%\"[\"(\"Brand\") %>% unique %>% nrow\n    Mycolors <- colorRampPalette(brewer.pal(8,\"Dark2\"))(colourCount)\n    \n    ggplot(.,aes(x=Year,y=Sales/1000,color=Brand)) +\n      geom_point(size=3) +\n      geom_line(size=1) +\n      scale_x_continuous(breaks=c(2014, 2020), limits=c(2013,2030)) +\n      expand_limits(y = 0) +\n      ylab(\"Sales ($b)\") + \n      theme(legend.position=\"none\") +\n      facet_grid(~Company, labeller=label_wrap_gen(width=10)) +\n      scale_colour_manual(values=Mycolors) +\n      ggtitle(\"Blockbuster diabetes drugs 2014 and 2020\\n(Data:FirstWord Lists)\") +\n      geom_dl(aes(label=Brand),list(\"last.points\",\n                                    \"calc.boxes\",\"calc.borders\",\n                                    qp.labels(\"y\", \"bottom\", \"top\")))\n  }\nggsave(\"Diabetesblockbusters.pdf\",width = 12.5,height = 4)\nggsave(\"Diabetesblockbusters.png\",width = 12.5,height = 4)",
    "created" : 1431348958897.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4192901847",
    "id" : "AD20102",
    "lastKnownWriteTime" : 1431349300,
    "path" : "~/Documents/Diabetesblockbusters/diabetesblockbusters.R",
    "project_path" : "diabetesblockbusters.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}